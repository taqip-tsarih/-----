<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø£Ø³Ø±Ù‰ Ø§Ù„Ø¹Ø³Ù„ÙŠ - Ù†Ø¨Ø±Ø§Ø³ - Ø¨Ø´Ø±Ù‰</title>
    <style>
        :root {
            --medical-blue: #00a8ff;
            --medical-green: #2ecc71;
            --alert-red: #e74c3c;
            --bg-light-gray: #f0f2f5; 
            --panel-white: #ffffff;
            --text-main: #2c3e50;
            --border-color: #d1d9e6;
        }

        body {
            background-color: var(--bg-light-gray);
            color: var(--text-main);
            font-family: 'Segoe UI', Arial, sans-serif;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            padding: 15px;
            box-sizing: border-box;
            transition: background 0.5s ease;
        }

        .device-frame {
            width: 100%;
            max-width: 450px;
            background: var(--panel-white);
            border: 4px solid var(--border-color);
            border-radius: 30px;
            padding: 25px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.08);
            position: relative;
            box-sizing: border-box;
        }

        .heart-icon {
            font-size: 30px;
            color: var(--alert-red);
            animation: beat 0.8s infinite;
            display: inline-block;
            margin-bottom: 10px;
        }

        @keyframes beat {
            0% { transform: scale(1); }
            15% { transform: scale(1.3); }
            30% { transform: scale(1); }
            45% { transform: scale(1.15); }
            60% { transform: scale(1); }
        }

        .screen-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            border-bottom: 2px solid var(--border-color);
            padding-bottom: 15px;
            margin-bottom: 20px;
        }

        .main-display {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        @media (max-width: 400px) {
            .main-display { grid-template-columns: 1fr; }
            .value { font-size: 2.8rem !important; }
        }

        .data-card {
            background: #f8fafc;
            padding: 15px;
            border-radius: 15px;
            text-align: center;
            border: 1px solid var(--border-color);
        }

        .label { font-size: 0.85rem; color: var(--medical-blue); font-weight: bold; }
        .value { font-size: 3.2rem; font-weight: 800; margin: 5px 0; font-family: 'Courier New', monospace; }
        .unit { font-size: 0.75rem; opacity: 0.6; }

        .ecg-container {
            height: 80px;
            margin: 20px 0;
            background: #eef2f7;
            border-radius: 10px;
            overflow: hidden;
            position: relative;
        }

        .ecg-line {
            width: 200%;
            height: 100%;
            background: linear-gradient(90deg, transparent 0%, var(--medical-green) 50%, transparent 100%);
            background-size: 50% 100%;
            animation: moveLine 2s linear infinite;
            opacity: 0.8;
        }

        @keyframes moveLine {
            from { transform: translateX(0); }
            to { transform: translateX(-50%); }
        }

        .action-area {
            margin-top: 25px;
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .btn-start {
            background: linear-gradient(45deg, var(--medical-blue), var(--medical-green));
            border: none;
            padding: 15px;
            border-radius: 50px;
            color: white;
            font-size: 1.1rem;
            font-weight: bold;
            cursor: pointer;
            box-shadow: 0 4px 15px rgba(0, 168, 255, 0.2);
            transition: 0.3s;
        }

        /* ØªÙ†Ø³ÙŠÙ‚ Ø²Ø± Ø§Ù„Ø·Ø¨Ø§Ø¹Ø© Ø§Ù„Ø¬Ø¯ÙŠØ¯ */
        .btn-print {
            background: #444;
            border: none;
            padding: 12px;
            border-radius: 50px;
            color: white;
            font-size: 0.9rem;
            font-weight: bold;
            cursor: pointer;
            display: none; /* Ù…Ø®ÙÙŠ ÙÙŠ Ø§Ù„Ø¨Ø¯Ø§ÙŠØ© */
            transition: 0.3s;
            margin-top: 5px;
        }

        .emergency-mode {
            background-color: #fff5f5 !important;
            animation: danger-glow 1s infinite alternate;
        }

        @keyframes danger-glow {
            from { border-color: var(--border-color); }
            to { border-color: var(--alert-red); box-shadow: 0 0 20px rgba(231, 76, 60, 0.2); }
        }

        .alert-banner {
            display: none;
            background: var(--alert-red);
            color: white;
            text-align: center;
            padding: 8px;
            border-radius: 10px;
            margin-top: 10px;
            font-weight: bold;
            font-size: 0.9rem;
        }

        /* Ø¥Ø®ÙØ§Ø¡ Ø¹Ù†Ø§ØµØ± Ù…Ø¹ÙŠÙ†Ø© Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ø·Ø¨Ø§Ø¹Ø© */
        @media print {
            body * { visibility: hidden; }
            #device, #device * { visibility: visible; }
            .btn-start, .btn-print { display: none !important; }
        }
    </style>
</head>
<body id="body-bg">

<div class="device-frame" id="device">
    <div class="screen-header">
        <div><span class="heart-icon">â¤ï¸</span> <strong>Ø§Ù„Ù…Ø±Ø§Ù‚Ø¨ Ø§Ù„Ø°ÙƒÙŠ</strong></div>
        <div id="time" style="font-size: 0.8rem; opacity: 0.7;">12:00 PM</div>
    </div>

    <div class="main-display">
        <div class="data-card">
            <div class="label">Ø¶ØºØ· Ø§Ù„Ø¯Ù… (SYS/DIA)</div>
            <div class="value" id="bp-val" style="color: var(--medical-blue);">--</div>
            <div class="unit">mmHg</div>
        </div>
        <div class="data-card">
            <div class="label">Ø§Ù„Ù†Ø¨Ø¶ (BPM)</div>
            <div class="value" id="hr-val" style="color: var(--medical-green);">--</div>
            <div class="unit">Ù†Ø¨Ø¶Ø© / Ø¯Ù‚ÙŠÙ‚Ø©</div>
        </div>
    </div>

    <div class="ecg-container">
        <div class="ecg-line" id="ecg"></div>
    </div>

    <div id="alert-msg" class="alert-banner">âš ï¸ ØªÙ†Ø¨ÙŠÙ‡: Ù‚ÙŠÙ… Ø®Ø§Ø±Ø¬ Ø§Ù„Ù†Ø·Ø§Ù‚ Ø§Ù„Ø·Ø¨ÙŠØ¹ÙŠ!</div>

    <div class="action-area">
        <button class="btn-start" onclick="runDiagnostic()">Ø§Ø¨Ø¯Ø£ Ø§Ù„Ù‚ÙŠØ§Ø³ Ø§Ù„Ø¢Ù†</button>
        <button id="print-btn" class="btn-print" onclick="printReport()">ğŸ–¨ï¸ ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØªÙ‚Ø±ÙŠØ± (PDF)</button>
        <div id="status" style="text-align: center; font-size: 0.8rem; color: #7f8c8d;">Ø§Ù„Ø¬Ù‡Ø§Ø² Ø¬Ø§Ù‡Ø² Ù„Ù„Ø¹Ù…Ù„</div>
    </div>
</div>

<script>
    function runDiagnostic() {
        const btn = document.querySelector('.btn-start');
        const printBtn = document.getElementById('print-btn');
        const status = document.getElementById('status');
        const bp = document.getElementById('bp-val');
        const hr = document.getElementById('hr-val');
        const body = document.getElementById('body-bg');
        const alertBanner = document.getElementById('alert-msg');

        btn.disabled = true;
        printBtn.style.display = "none";
        btn.innerText = "Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù„ÙŠÙ„...";
        status.innerText = "ÙŠØ±Ø¬Ù‰ Ø§Ù„Ø¨Ù‚Ø§Ø¡ Ù‡Ø§Ø¯Ø¦Ø§Ù‹...";
        alertBanner.style.display = "none";
        body.classList.remove('emergency-mode');

        let timer = 0;
        const interval = setInterval(() => {
            bp.innerText = Math.floor(Math.random() * 50 + 80);
            hr.innerText = Math.floor(Math.random() * 40 + 60);
            timer++;
            if(timer > 15) clearInterval(interval);
        }, 100);

        setTimeout(() => {
            clearInterval(interval);
            
            const sys = Math.floor(Math.random() * (180 - 100) + 100);
            const dia = Math.floor(Math.random() * (110 - 60) + 60);
            const heartRate = Math.floor(Math.random() * (130 - 55) + 55);

            bp.innerText = `${sys}/${dia}`;
            hr.innerText = heartRate;
            btn.disabled = false;
            btn.innerText = "Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ù‚ÙŠØ§Ø³";
            status.innerText = "Ø§ÙƒØªÙ…Ù„ Ø§Ù„Ù‚ÙŠØ§Ø³";
            printBtn.style.display = "block"; // Ø¥Ø¸Ù‡Ø§Ø± Ø²Ø± Ø§Ù„Ø·Ø¨Ø§Ø¹Ø©

            if (sys > 150 || sys < 95 || heartRate > 110 || heartRate < 55) {
                body.classList.add('emergency-mode');
                alertBanner.style.display = "block";
                status.innerText = "ØªÙ†Ø¨ÙŠÙ‡ Ø·Ø¨ÙŠ!";
            }
        }, 3000);
    }

    // ÙˆØ¸ÙŠÙØ© Ø§Ù„Ø·Ø¨Ø§Ø¹Ø© / Ø­ÙØ¸ PDF
    function printReport() {
        const timeNow = document.getElementById('time').innerText;
        const bpNow = document.getElementById('bp-val').innerText;
        const hrNow = document.getElementById('hr-val').innerText;
        
        // Ø¥Ù†Ø´Ø§Ø¡ Ù…Ø­ØªÙˆÙ‰ Ø§Ù„Ø·Ø¨Ø§Ø¹Ø© ÙÙŠ Ù†Ø§ÙØ°Ø© Ø¬Ø¯ÙŠØ¯Ø©
        const printWindow = window.open('', '_blank');
        printWindow.document.write(`
            <html lang="ar" dir="rtl">
            <head>
                <title>ØªÙ‚Ø±ÙŠØ± Ø·Ø¨ÙŠ - ${timeNow}</title>
                <style>
                    body { font-family: Arial, sans-serif; padding: 40px; text-align: right; }
                    .header { border-bottom: 2px solid #333; padding-bottom: 10px; margin-bottom: 30px; }
                    .result-box { margin: 20px 0; padding: 15px; border: 1px solid #ddd; border-radius: 8px; }
                    .value { font-size: 24px; font-weight: bold; color: #00a8ff; }
                    .footer { margin-top: 50px; font-size: 12px; color: #777; }
                </style>
            </head>
            <body>
                <div class="header">
                    <h1>ØªÙ‚Ø±ÙŠØ± Ø§Ù„Ù‚ÙŠØ§Ø³ Ø§Ù„Ø­ÙŠÙˆÙŠ Ø§Ù„Ø¯ÙˆØ±ÙŠ</h1>
                    <p>Ø§Ù„ØªØ§Ø±ÙŠØ® ÙˆØ§Ù„ÙˆÙ‚Øª: ${new Date().toLocaleDateString('ar-EG')} | ${timeNow}</p>
                </div>
                <div class="result-box">
                    <p>Ø¶ØºØ· Ø§Ù„Ø¯Ù… (SYS/DIA): <span class="value">${bpNow} mmHg</span></p>
                </div>
                <div class="result-box">
                    <p>Ù…Ø¹Ø¯Ù„ Ù†Ø¨Ø¶Ø§Øª Ø§Ù„Ù‚Ù„Ø¨: <span class="value" style="color:#2ecc71">${hrNow} BPM</span></p>
                </div>
                <div class="footer">
                    <p>ØªÙ… Ø§Ø³ØªØ®Ø±Ø§Ø¬ Ù‡Ø°Ø§ Ø§Ù„ØªÙ‚Ø±ÙŠØ± Ø¢Ù„ÙŠØ§Ù‹ Ø¨ÙˆØ§Ø³Ø·Ø© Ù†Ø¸Ø§Ù… Ø§Ù„Ù…Ø±Ø§Ù‚Ø¨ Ø§Ù„Ø°ÙƒÙŠ.</p>
                </div>
            </body>
            </html>
        `);
        printWindow.document.close();
        printWindow.print();
    }

    setInterval(() => {
        const now = new Date();
        document.getElementById('time').innerText = now.toLocaleTimeString();
    }, 1000);
</script>

</body>
</html>
